<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="DealBridge.png">
    <title>AI Mandate Platform | Marketplace</title>
    <link rel="stylesheet" href="Styles.css">
    <style>
        /* Conditional coloring for % closed column */
        .high-rate {
            color: #00ff99;
            font-weight: bold;
        }
        .low-rate {
            color: #ff6666;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            border-bottom: 1px solid #00bfff;
            text-align: left;
        }
        thead {
            background-color: rgba(0,191,255,0.2);
        }
        .filters {
            background: rgba(0,191,255,0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        select, input {
            padding: 8px;
            border: 1px solid #00bfff;
            border-radius: 4px;
            background: white;
        }
        .hidden {
            display: none;
        }
        /* Styles for status indicators */
        .active-row {
            transition: background-color 0.2s;
        }
        .active-row:hover {
            background-color: rgba(0,191,255,0.1);
        }
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        .status-active {
            background-color: rgba(0,179,0,0.1);
            color: #00b300;
        }
        .status-inactive {
            background-color: rgba(128,128,128,0.1);
            color: #666;
        }
        /* Add subtle animation to indicate clickable */
        .active-row td {
            position: relative;
        }
        .active-row:hover td::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 2px;
            background-color: #00bfff;
            transform: scaleX(0);
            animation: slideIn 0.3s forwards;
        }
        @keyframes slideIn {
            to { transform: scaleX(1); }
        }
    </style>
</head>
<body>

<header>
    <div class="header-content" style="display: flex; align-items: center; gap: 20px;">
        <img src="DealBridge.png" alt="DealBridge Logo" style="height: 50px; width: auto;">
        <div>
            <h1>Marketplace</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="market.html">Marketplace</a></li>
                    <li><a href="signup.html">Sign Up</a></li>
                    <li><a href="account.html">Account</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<main>
    <section>
        <h2>Available Buyers & Sellers</h2>
        <p>Browse verified partners ready to engage in trusted AI-mandated transactions.</p>

        <div class="filters">
            <div class="filter-group">
                <label for="roleFilter">Role:</label>
                <select id="roleFilter">
                    <option value="all">All</option>
                    <option value="Buyer">Buyers</option>
                    <option value="Seller">Sellers</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="statusFilter">Status:</label>
                <select id="statusFilter">
                    <option value="all">All</option>
                    <option value="Active">Active</option>
                    <option value="Inactive">Inactive</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="verifiedFilter">Verification:</label>
                <select id="verifiedFilter">
                    <option value="all">All</option>
                    <option value="Yes">Verified Only</option>
                    <option value="No">Unverified Only</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="activeDealsFilter">Deal Status:</label>
                <select id="activeDealsFilter">
                    <option value="all">All</option>
                    <option value="Yes">Actively Looking</option>
                    <option value="No">Not Looking</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="minCloseRate">Min. Close Rate:</label>
                <select id="minCloseRate">
                    <option value="0">All</option>
                    <option value="20">20% or higher</option>
                    <option value="30">30% or higher</option>
                    <option value="40">40% or higher</option>
                </select>
            </div>
        </div>

        <table id="marketTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Role</th>
                    <th>Transaction Type</th>
                    <th>Status</th>
                    <th>Verified</th>
                    <th>Searching for Deals</th>
                    <th>% of Deals Closed</th>
                </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
        </table>

        <script>
            // Database of buyers and sellers
            const marketData = [
                { name: "Lara Vance", role: "Buyer", type: "Digital Artwork", status: "Active", verified: "Yes", searching: "Yes", closeRate: 36 },
                { name: "Ethan Cross", role: "Seller", type: "AI Model Training Data", status: "Inactive", verified: "Yes", searching: "No", closeRate: 15 },
                { name: "Yara Singh", role: "Buyer", type: "Cybersecurity License", status: "Active", verified: "Yes", searching: "Yes", closeRate: 48 },
                { name: "Marcus Osei", role: "Seller", type: "Robotics Components", status: "Active", verified: "No", searching: "Yes", closeRate: 10 },
                { name: "Nadia Petrova", role: "Seller", type: "Blockchain Service", status: "Inactive", verified: "No", searching: "No", closeRate: 27 },
                { name: "Alex Chen", role: "Buyer", type: "Machine Learning Models", status: "Active", verified: "Yes", searching: "Yes", closeRate: 42 },
                { name: "Sarah O'Connor", role: "Seller", type: "IoT Solutions", status: "Active", verified: "Yes", searching: "Yes", closeRate: 55 },
                { name: "Raj Patel", role: "Buyer", type: "Data Analytics Tools", status: "Active", verified: "Yes", searching: "No", closeRate: 31 },
                { name: "Elena Rodriguez", role: "Seller", type: "Cloud Services", status: "Inactive", verified: "No", searching: "Yes", closeRate: 18 },
                { name: "James Wilson", role: "Buyer", type: "Security Software", status: "Inactive", verified: "Yes", searching: "Yes", closeRate: 25 },
                { name: "Maya Chang", role: "Seller", type: "AI Algorithms", status: "Active", verified: "Yes", searching: "Yes", closeRate: 44 },
                { name: "Thomas Weber", role: "Buyer", type: "Quantum Computing", status: "Inactive", verified: "No", searching: "No", closeRate: 22 },
                { name: "Aisha Hassan", role: "Seller", type: "Digital Infrastructure", status: "Active", verified: "Yes", searching: "Yes", closeRate: 38 },
                { name: "Viktor Novak", role: "Buyer", type: "Automation Systems", status: "Active", verified: "Yes", searching: "Yes", closeRate: 33 },
                { name: "Lisa Thompson", role: "Seller", type: "Big Data Solutions", status: "Active", verified: "Yes", searching: "No", closeRate: 47 }
            ];

            // Function to render the table
            function renderTable(data) {
                const tbody = document.getElementById('tableBody');
                tbody.innerHTML = '';

                // Show only first 10 results after filtering
                data.slice(0, 10).forEach(item => {
                    const row = document.createElement('tr');
                    
                    // If status is "Active", make the entire row clickable and add visual hints
                    if (item.status === "Active") {
                        row.style.cursor = 'pointer';
                        row.classList.add('active-row');
                        row.title = `Click to start mandate with ${item.name}`;
                        row.onclick = () => {
                            // Store the selected partner info for the mandate interface
                            localStorage.setItem('selectedPartner', JSON.stringify({
                                name: item.name,
                                role: item.role,
                                type: item.type,
                                closeRate: item.closeRate
                            }));
                            window.location.href = 'Mandate.html';
                        };
                    }
                    
                    row.innerHTML = `
                        <td>${item.name}</td>
                        <td>${item.role}</td>
                        <td>${item.type}</td>
                        <td>
                            <span class="status-indicator ${item.status === 'Active' ? 'status-active' : 'status-inactive'}">
                                ${item.status}
                            </span>
                        </td>
                        <td>${item.verified}</td>
                        <td>${item.searching}</td>
                        <td class="${item.closeRate >= 30 ? 'high-rate' : 'low-rate'}">${item.closeRate}%</td>
                    `;
                    tbody.appendChild(row);
                });
            }

            // Function to filter the data
            function filterData() {
                let filteredData = marketData.filter(item => {
                    const roleFilter = document.getElementById('roleFilter').value;
                    const statusFilter = document.getElementById('statusFilter').value;
                    const verifiedFilter = document.getElementById('verifiedFilter').value;
                    const activeDealsFilter = document.getElementById('activeDealsFilter').value;
                    const minCloseRate = parseInt(document.getElementById('minCloseRate').value);

                    return (roleFilter === 'all' || item.role === roleFilter) &&
                           (statusFilter === 'all' || item.status === statusFilter) &&
                           (verifiedFilter === 'all' || item.verified === verifiedFilter) &&
                           (activeDealsFilter === 'all' || item.searching === activeDealsFilter) &&
                           (item.closeRate >= minCloseRate);
                });

                renderTable(filteredData);
            }

            // Add event listeners to all filters
            document.querySelectorAll('select').forEach(select => {
                select.addEventListener('change', filterData);
            });

            // Initial render
            renderTable(marketData);
        </script>
    </section>

    <section style="text-align:center;">
        <a href="index.html" class="button">‚Üê Back to Home</a>
    </section>
</main>

<footer>
    <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 20px;">
        <img src="DealBridge.png" alt="DealBridge Logo" style="height: 30px; width: auto;">
        <p>&copy; 2025 DealBridge AI Mandate Program. All rights reserved.</p>
    </div>
</footer>

</body>
</html>
